"use strict";(self.webpackChunkchat_app=self.webpackChunkchat_app||[]).push([[618],{6571:function(n,e,t){t(2791);e.Z=t.p+"static/media/logo.ccfbd90732828204fa6989c0f15638c0.svg"},618:function(n,e,t){t.r(e),t.d(e,{default:function(){return F}});var r,a=t(168),i=t(5861),o=t(9439),c=t(7757),s=t.n(c),d=t(2791),u=t(4569),l=t.n(u),m=t(7689),f=t(1006),p=t(6444),g=t(8204),h=t(3433),x=t(9126),v=t(4373),S=t(2975),_=t.n(S),E=t(184);function b(n){var e=n.handleSendMsg,t=(0,d.useState)(""),r=(0,o.Z)(t,2),a=r[0],i=r[1],c=(0,d.useState)(!1),s=(0,o.Z)(c,2),u=s[0],l=s[1];return(0,E.jsxs)(w,{children:[(0,E.jsx)("div",{className:"button-container",children:(0,E.jsxs)("div",{className:"emoji",children:[(0,E.jsx)(x.IZ1,{onClick:function(){l(!u)}}),u&&(0,E.jsx)(_(),{onEmojiClick:function(n,e){var t=a;t+=e.emoji,i(t)}})]})}),(0,E.jsxs)("form",{className:"input-container",onSubmit:function(n){return function(n){n.preventDefault(),a.length>0&&(e(a),i(""))}(n)},children:[(0,E.jsx)("input",{type:"text",placeholder:"type your message here",onChange:function(n){return i(n.target.value)},value:a}),(0,E.jsx)("button",{type:"submit",children:(0,E.jsx)(v.ghy,{})})]})]})}var T,w=p.ZP.div(r||(r=(0,a.Z)(["\n  display: grid;\n  align-items: center;\n  grid-template-columns: 5% 95%;\n  background-color: #080420;\n  padding: 0 2rem;\n  @media screen and (min-width: 720px) and (max-width: 1080px) {\n    padding: 0 1rem;\n    gap: 1rem;\n  }\n  .button-container {\n    display: flex;\n    align-items: center;\n    color: white;\n    gap: 1rem;\n    .emoji {\n      position: relative;\n      svg {\n        font-size: 1.5rem;\n        color: #ffff00c8;\n        cursor: pointer;\n      }\n      .emoji-picker-react {\n        position: absolute;\n        top: -350px;\n        background-color: #080420;\n        box-shadow: 0 5px 10px #9a86f3;\n        border-color: #9a86f3;\n        .emoji-scroll-wrapper::-webkit-scrollbar {\n          background-color: #080420;\n          width: 5px;\n          &-thumb {\n            background-color: #9a86f3;\n          }\n        }\n        .emoji-categories {\n          button {\n            filter: contrast(0);\n          }\n        }\n        .emoji-search {\n          background-color: transparent;\n          border-color: #9a86f3;\n        }\n        .emoji-group:before {\n          background-color: #080420;\n        }\n      }\n    }\n  }\n  .input-container {\n    width: 100%;\n    border-radius: 2rem;\n    display: flex;\n    align-items: center;\n    gap: 2rem;\n    background-color: #ffffff34;\n    input {\n      width: 90%;\n      height: 60%;\n      background-color: transparent;\n      color: white;\n      border: none;\n      padding-left: 1rem;\n      font-size: 1.2rem;\n\n      &::selection {\n        background-color: #9a86f3;\n      }\n      &:focus {\n        outline: none;\n      }\n    }\n    button {\n      padding: 0.3rem 2rem;\n      border-radius: 2rem;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      background-color: #9a86f3;\n      border: none;\n      @media screen and (min-width: 720px) and (max-width: 1080px) {\n        padding: 0.3rem 1rem;\n        svg {\n          font-size: 1rem;\n        }\n      }\n      svg {\n        font-size: 2rem;\n        color: white;\n      }\n    }\n  }\n"]))),O=t(7692);function j(){var n=(0,m.s0)(),e=function(){var e=(0,i.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,JSON.parse(localStorage.getItem({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_LOCALHOST_KEY))._id;case 2:return t=e.sent,e.next=5,l().get("".concat(g.p_,"/").concat(t));case 5:200===e.sent.status&&(localStorage.clear(),n("/login"));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,E.jsx)(k,{onClick:e,children:(0,E.jsx)(O.t7h,{})})}var C,k=p.ZP.button(T||(T=(0,a.Z)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 0.5rem;\n  border-radius: 0.5rem;\n  background-color: #9a86f3;\n  border: none;\n  cursor: pointer;\n  svg {\n    font-size: 1.3rem;\n    color: #ebe7ff;\n  }\n"]))),P=t(2810);function A(n){var e=n.currentChat,t=n.socket,r=(0,d.useState)([]),a=(0,o.Z)(r,2),c=a[0],u=a[1],m=(0,d.useRef)(),f=(0,d.useState)(null),p=(0,o.Z)(f,2),x=p[0],v=p[1];(0,d.useEffect)((0,i.Z)(s().mark((function n(){var t,r;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,JSON.parse(localStorage.getItem({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_LOCALHOST_KEY));case 2:return t=n.sent,n.next=5,l().post(g.Bw,{from:t._id,to:e._id});case 5:r=n.sent,u(r.data);case 7:case"end":return n.stop()}}),n)}))),[e]),(0,d.useEffect)((function(){var n=function(){var n=(0,i.Z)(s().mark((function n(){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=3;break}return n.next=3,JSON.parse(localStorage.getItem({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_LOCALHOST_KEY))._id;case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[e]);var S=function(){var n=(0,i.Z)(s().mark((function n(r){var a,i;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,JSON.parse(localStorage.getItem({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_LOCALHOST_KEY));case 2:return a=n.sent,t.current.emit("send-msg",{to:e._id,from:a._id,msg:r}),n.next=6,l().post(g.JC,{from:a._id,to:e._id,message:r});case 6:(i=(0,h.Z)(c)).push({fromSelf:!0,message:r}),u(i);case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return(0,d.useEffect)((function(){t.current&&t.current.on("msg-recieve",(function(n){v({fromSelf:!1,message:n})}))}),[]),(0,d.useEffect)((function(){x&&u((function(n){return[].concat((0,h.Z)(n),[x])}))}),[x]),(0,d.useEffect)((function(){var n;null===(n=m.current)||void 0===n||n.scrollIntoView({behavior:"smooth"})}),[c]),(0,E.jsxs)(R,{children:[(0,E.jsxs)("div",{className:"chat-header",children:[(0,E.jsxs)("div",{className:"user-details",children:[(0,E.jsx)("div",{className:"avatar",children:(0,E.jsx)("img",{src:"data:image/svg+xml;base64,".concat(e.avatarImage),alt:""})}),(0,E.jsx)("div",{className:"username",children:(0,E.jsx)("h3",{children:e.username})})]}),(0,E.jsx)(j,{})]}),(0,E.jsx)("div",{className:"chat-messages",children:c.map((function(n){return(0,E.jsx)("div",{ref:m,children:(0,E.jsx)("div",{className:"message ".concat(n.fromSelf?"sended":"recieved"),children:(0,E.jsx)("div",{className:"content ",children:(0,E.jsx)("p",{children:n.message})})})},(0,P.Z)())}))}),(0,E.jsx)(b,{handleSendMsg:S})]})}var N,R=p.ZP.div(C||(C=(0,a.Z)(["\n  display: grid;\n  grid-template-rows: 10% 80% 10%;\n  gap: 0.1rem;\n  overflow: hidden;\n  @media screen and (min-width: 720px) and (max-width: 1080px) {\n    grid-template-rows: 15% 70% 15%;\n  }\n  .chat-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 0 2rem;\n    .user-details {\n      display: flex;\n      align-items: center;\n      gap: 1rem;\n      .avatar {\n        img {\n          height: 3rem;\n        }\n      }\n      .username {\n        h3 {\n          color: white;\n        }\n      }\n    }\n  }\n  .chat-messages {\n    padding: 1rem 2rem;\n    display: flex;\n    flex-direction: column;\n    gap: 1rem;\n    overflow: auto;\n    &::-webkit-scrollbar {\n      width: 0.2rem;\n      &-thumb {\n        background-color: #ffffff39;\n        width: 0.1rem;\n        border-radius: 1rem;\n      }\n    }\n    .message {\n      display: flex;\n      align-items: center;\n      .content {\n        max-width: 40%;\n        overflow-wrap: break-word;\n        padding: 1rem;\n        font-size: 1.1rem;\n        border-radius: 1rem;\n        color: #d1d1d1;\n        @media screen and (min-width: 720px) and (max-width: 1080px) {\n          max-width: 70%;\n        }\n      }\n    }\n    .sended {\n      justify-content: flex-end;\n      .content {\n        background-color: #4f04ff21;\n      }\n    }\n    .recieved {\n      justify-content: flex-start;\n      .content {\n        background-color: #9900ff20;\n      }\n    }\n  }\n"]))),Z=t(6571);function y(n){var e=n.contacts,t=n.changeChat,r=(0,d.useState)(void 0),a=(0,o.Z)(r,2),c=a[0],u=a[1],l=(0,d.useState)(void 0),m=(0,o.Z)(l,2),f=m[0],p=m[1],g=(0,d.useState)(void 0),h=(0,o.Z)(g,2),x=h[0],v=h[1];(0,d.useEffect)((0,i.Z)(s().mark((function n(){var e;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,JSON.parse(localStorage.getItem({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_LOCALHOST_KEY));case 2:e=n.sent,u(e.username),p(e.avatarImage);case 5:case"end":return n.stop()}}),n)}))),[]);return(0,E.jsx)(E.Fragment,{children:f&&f&&(0,E.jsxs)(D,{children:[(0,E.jsxs)("div",{className:"brand",children:[(0,E.jsx)("img",{src:Z.Z,alt:"logo"}),(0,E.jsx)("h3",{children:"snappy"})]}),(0,E.jsx)("div",{className:"contacts",children:e.map((function(n,e){return(0,E.jsxs)("div",{className:"contact ".concat(e===x?"selected":""),onClick:function(){return function(n,e){v(n),t(e)}(e,n)},children:[(0,E.jsx)("div",{className:"avatar",children:(0,E.jsx)("img",{src:"data:image/svg+xml;base64,".concat(n.avatarImage),alt:""})}),(0,E.jsx)("div",{className:"username",children:(0,E.jsx)("h3",{children:n.username})})]},n._id)}))}),(0,E.jsxs)("div",{className:"current-user",children:[(0,E.jsx)("div",{className:"avatar",children:(0,E.jsx)("img",{src:"data:image/svg+xml;base64,".concat(f),alt:"avatar"})}),(0,E.jsx)("div",{className:"username",children:(0,E.jsx)("h2",{children:c})})]})]})})}var K,D=p.ZP.div(N||(N=(0,a.Z)(["\n  display: grid;\n  grid-template-rows: 10% 75% 15%;\n  overflow: hidden;\n  background-color: #080420;\n  .brand {\n    display: flex;\n    align-items: center;\n    gap: 1rem;\n    justify-content: center;\n    img {\n      height: 2rem;\n    }\n    h3 {\n      color: white;\n      text-transform: uppercase;\n    }\n  }\n  .contacts {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    overflow: auto;\n    gap: 0.8rem;\n    &::-webkit-scrollbar {\n      width: 0.2rem;\n      &-thumb {\n        background-color: #ffffff39;\n        width: 0.1rem;\n        border-radius: 1rem;\n      }\n    }\n    .contact {\n      background-color: #ffffff34;\n      min-height: 5rem;\n      cursor: pointer;\n      width: 90%;\n      border-radius: 0.2rem;\n      padding: 0.4rem;\n      display: flex;\n      gap: 1rem;\n      align-items: center;\n      transition: 0.5s ease-in-out;\n      .avatar {\n        img {\n          height: 3rem;\n        }\n      }\n      .username {\n        h3 {\n          color: white;\n        }\n      }\n    }\n    .selected {\n      background-color: #9a86f3;\n    }\n  }\n\n  .current-user {\n    // background-color: #0d0d30;\n    background-color:aqua;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    gap: 2rem;\n    .avatar {\n      img {\n        height: 4rem;\n        max-inline-size: 100%;\n      }\n    }\n    .username {\n      h2 {\n        color: white;\n      }\n    }\n    @media screen and (min-width: 720px) and (max-width: 1080px) {\n      gap: 0.5rem;\n      .username {\n        h2 {\n          font-size: 1rem;\n        }\n      }\n    }\n  }\n"]))),H=t(3958);function L(){var n=(0,d.useState)(""),e=(0,o.Z)(n,2),t=e[0],r=e[1];return(0,d.useEffect)((0,i.Z)(s().mark((function n(){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=r,n.next=3,JSON.parse(localStorage.getItem({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_LOCALHOST_KEY)).username;case 3:n.t1=n.sent,(0,n.t0)(n.t1);case 5:case"end":return n.stop()}}),n)}))),[]),(0,E.jsxs)(I,{children:[(0,E.jsx)("img",{src:H,alt:""}),(0,E.jsxs)("h1",{children:["Welcome, ",(0,E.jsxs)("span",{children:[t,"!"]})]}),(0,E.jsx)("h3",{children:"Please select a chat to Start messaging."})]})}var W,I=p.ZP.div(K||(K=(0,a.Z)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: white;\n  flex-direction: column;\n  img {\n    height: 20rem;\n  }\n  span {\n    color: #4e0eff;\n  }\n"])));function F(){var n=(0,m.s0)(),e=(0,d.useRef)(),t=(0,d.useState)([]),r=(0,o.Z)(t,2),a=r[0],c=r[1],u=(0,d.useState)(void 0),p=(0,o.Z)(u,2),h=p[0],x=p[1],v=(0,d.useState)(void 0),S=(0,o.Z)(v,2),_=S[0],b=S[1];(0,d.useEffect)((0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.getItem({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_LOCALHOST_KEY)){e.next=4;break}n("/login"),e.next=9;break;case 4:return e.t0=b,e.next=7,JSON.parse(localStorage.getItem({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_LOCALHOST_KEY));case 7:e.t1=e.sent,(0,e.t0)(e.t1);case 9:case"end":return e.stop()}}),e)}))),[]),(0,d.useEffect)((function(){_&&(e.current=(0,f.io)(g.ho),e.current.emit("add-user",_._id))}),[_]),(0,d.useEffect)((0,i.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_){e.next=9;break}if(!_.isAvatarImageSet){e.next=8;break}return e.next=4,l().get("".concat(g.pK,"/").concat(_._id));case 4:t=e.sent,c(t.data),e.next=9;break;case 8:n("/setAvatar");case 9:case"end":return e.stop()}}),e)}))),[_]);return(0,E.jsx)(E.Fragment,{children:(0,E.jsx)(U,{children:(0,E.jsxs)("div",{className:"container",children:[(0,E.jsx)(y,{contacts:a,changeChat:function(n){x(n)}}),void 0===h?(0,E.jsx)(L,{}):(0,E.jsx)(A,{currentChat:h,socket:e})]})})})}var U=p.ZP.div(W||(W=(0,a.Z)(["\n  height: 100vh;\n  width: 100vw;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  gap: 1rem;\n  align-items: center;\n  background-color: #131324;\n  .container {\n    height: 85vh;\n    width: 85vw;\n    background-color: #00000076;\n    display: grid;\n    grid-template-columns: 25% 75%;\n    @media screen and (min-width: 720px) and (max-width: 1080px) {\n      grid-template-columns: 35% 65%;\n    }\n  }\n"])))},8204:function(n,e,t){t.d(e,{ho:function(){return r},VU:function(){return a},X0:function(){return i},p_:function(){return o},pK:function(){return c},JC:function(){return s},Bw:function(){return d},TC:function(){return u}});var r="http://localhost:5000",a="".concat(r,"/api/auth/login"),i="".concat(r,"/api/auth/register"),o="".concat(r,"/api/auth/logout"),c="".concat(r,"/api/auth/allusers"),s="".concat(r,"/api/messages/addmsg"),d="".concat(r,"/api/messages/getmsg"),u="".concat(r,"/api/auth/setavatar")},3958:function(n,e,t){n.exports=t.p+"static/media/robot.0617a41936621e9697cd.gif"}}]);
//# sourceMappingURL=618.d86ed336.chunk.js.map